<!DOCTYPE html>
<html lang="en">
<head>
  <title>rad - general purpose, typed build tools</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism-okaidia.min.css" rel="stylesheet" />
<style>
/* prefixed by https://autoprefixer.github.io (PostCSS: v7.0.26, autoprefixer: v9.7.3) */
/**
 * override okaidia bogus operator
 */
 .token.operator {
 background-color: transparent !important;
}

/* page */
@import url(https://fonts.googleapis.com/css?family=Open+Sans:800);
html, body {
  height: 100%;
  margin: 0;
  width: 100vw;
  overflow-x: hidden;
}

a, a:visited {color:#2196f3;} /* Visited link    */
table {
  display: block;
  overflow-x: auto;
  border: 0.1px dashed #ffffff1a;
  padding: 8px;
}
td {
  border: 0.1px dashed #ffffff1a;
  padding: 8px;
}

/* hero */
.baby-rad {
  -webkit-transition: all 5s;
  -o-transition: all 5s;
  transition: all 5s;
}
svg#radness text {
  fill: white;
  stroke-width: 1;
  stroke: beige;
}
#hero_actions {
  width: 100%;
  max-width: 800px;
  padding-right: 16px;
  text-align: right;
  margin: auto;
}
#hero_actions * {
  display: inline-block;
  font-size: xx-small;
  cursor: pointer;
}

/* content */
body {
  font-family: sans-serif;
  background-color: #303030;
  color: white;
}
div.content {
  margin: auto;
  max-width: 800px;
  padding: 0 16px;
}
svg#radness {
  background: #303030;
  font: 5em/1 Open Sans, Impact;
  text-transform: uppercase;
  margin: 0;
  width: 100%;
  height: 300px;
}
#big_baby {
  cursor: pointer;
}
</style>
</head>
<body>
<!-- github corners start -->
<a href="https://github.com/cdaringe/rad" class="github-corner" aria-label="View source on GitHub">
  <svg width="50" height="50" viewBox="0 0 250 250" style="fill:#2196f3; color:#303030; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
  </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<!-- github corners stop -->

<svg id="radness" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <symbol id="repeatme">
    <text text-anchor="middle" x="0" y="0" dx='1em' dy="1em">RAD</text>
  </symbol>
  <g id="repeats" />
  <use class="text" xlink:href="#big_baby" />
  <text id="big_baby" text-anchor="middle" x="85%" y="80%" dy=".35em">RAD</text>
</svg>
<!-- <a href=""><img width="60px" style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a> -->
<div id='hero_actions'>
  <a id='add_more_transforms' style='display: none;' target="_blank" rel="noreferrer noopener" href="https://github.com/cdaringe/rad/blob/next/assets/site/supplemental-transforms.ts">add-more-animations!</a>
  <a id='click_prompt' onclick="onClick()">^click-me</a>
</div>
<div class='content'>
  <h1 id="rad-üíØ">rad üíØ</h1>
<p>A general purpose build tool. Concise, statically typed, batteries included.
Command tasks, function tasks, and make-style tasks supported.</p>
<p>Jump to:</p>
<ol start="2">
<li><a href="#usage">Usage</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#what-is-it">What</a></li>
<li><a href="https://cdaringe.github.io/rad/#why-not-my-favorite-build-tool">Why not <code>&lt;my-favorite-build-tool&gt;</code>?</a></li>
<li><a href="https://cdaringe.github.io/rad/#manual">Manual</a></li>
</ol>
<table>
<thead>
<tr>
<th>branch</th>
<th>status</th>
</tr>
</thead>
<tbody><tr>
<td>main</td>
<td><a href="https://github.com/cdaringe/rad/actions?query=workflow%3Amain"><img src="https://github.com/cdaringe/rad/workflows/main/badge.svg" alt="main"></a></td>
</tr>
<tr>
<td>next</td>
<td><a href="https://github.com/cdaringe/rad/actions?query=workflow%3Anext"><img src="https://github.com/cdaringe/rad/workflows/next/badge.svg?branch=next" alt="next"></a></td>
</tr>
</tbody></table>
<p><code>rad@6.x</code> now supports <code>Deno@1.8.x+</code>!</p>
<h2 id="usage">Usage</h2>
<p>Rad is generally used as a CLI:</p>
<p><code>$ rad &lt;task-name&gt; [--help]</code></p>
<p>For example, <code>$ rad build</code> or <code>$ rad --log-level=info test</code>!</p>
<p>It can be used as a library too :).</p>
<p>Rad always consumes a <code>rad.ts</code> file, such as the one shown here:</p>
<pre><code class="language-ts">// rad.ts
import { Task, Tasks } from &quot;https://deno.land/x/rad@v6.3.5/src/mod.ts&quot;;

// command/shell tasks
const format = `prettier --write`;
const test = `deno test`;

// function tasks
const compile: Task = {
  dependsOn: [format],
  fn: ({ sh, ...toolkit }) =&gt; sh(&quot;tsc&quot;),
};
const greet = {
  fn: () =&gt; Deno.writeTextFile(&quot;/tmp/hello&quot;, &quot;world&quot;),
};

// make-style tasks
const transpile: Task = {
  target: &quot;phony&quot;,
  prereqs: [&quot;prereq1&quot;, &quot;prereq2&quot;],
  async onMake({ logger }, { changedPrereqs /*, prereqs */ }) {
    for await (const req of changedPrereqs) {
      logger.info(`req: ${req.path} ${req.isFile}`);
    }
  },
};

export const tasks: Tasks = {
  compile,
  format,
  greet,
  test,
};
</code></pre>
<h2 id="install">Install</h2>
<p>There are a few formal ways to use <code>rad</code>. Regardless of the route you choose,
know that all strategies support using pinned versions, adherent to semver. See
the <a href="https://github.com/cdaringe/rad/releases">releases page</a>.</p>
<table>
<thead>
<tr>
<th>usage</th>
<th>install-method</th>
<th>install-steps</th>
</tr>
</thead>
<tbody><tr>
<td>cli</td>
<td><code>deno</code></td>
<td><code>deno install --unstable -f -A -n rad https://raw.githubusercontent.com/cdaringe/rad/v6.3.5/src/bin.ts</code></td>
</tr>
<tr>
<td>cli</td>
<td><code>docker</code></td>
<td><code>docker pull cdaringe/rad</code> <sup>1</sup></td>
</tr>
<tr>
<td>cli</td>
<td><code>curl</code></td>
<td><code>curl -fsSL <a href="https://raw.githubusercontent.com/cdaringe/rad/v6.3.5/assets/install.sh">https://raw.githubusercontent.com/cdaringe/rad/v6.3.5/assets/install.sh</a> | sh</code> (versioned)<br /><code>curl -fsSL <a href="https://raw.githubusercontent.com/cdaringe/rad/main/assets/install.sh">https://raw.githubusercontent.com/cdaringe/rad/main/assets/install.sh</a> | sh</code> (latest)</td>
</tr>
<tr>
<td>library</td>
<td><code>deno</code></td>
<td><code>import * as rad from https://github.com/cdaringe/rad/blob/main/v6.3.5/mod.ts</code></td>
</tr>
</tbody></table>
<p><sup>1</sup>For docker users, consider making a nice shell alias</p>
<pre><code class="language-bash"># shell profile, e.g. .bash_profile
function rad() {
  docker run --unstable --rm -v $PWD:/rad cdaringe/rad --log-level info &quot;$@&quot;;
}
</code></pre>
<h2 id="what-is-it">What is it</h2>
<p>A build tool! It competes with make, npm-scripts, velociraptor, bazel, gradle,
ant, gulp, or any of the other many tools out there! On various metrics, <code>rad</code>
is subjectively better than some of the outstanding tools out there, and in some
cases, not-so-much. We invite you to understand some of its core characteristics
and interfaces.</p>
<p><code>rad</code> offers:</p>
<ul>
<li>simple, <strong>programmable</strong> task interfaces</li>
<li><strong>easy to understand</strong>, declarative build steps</li>
<li><strong>type-checked</strong> tasks</li>
<li><strong>no quirky DSLs</strong> (<code>make</code>, <code>gradle</code>, and friends üò¢). <strong>your build is code</strong>,
not an arbitrary language or stringly (read: bummerly) typed script runner.</li>
<li>productive toolkit API for nuanced tasks that benefit from programming. see
<a href="#toolkit">toolkit</a><!-- @todo write toolkit docs--></li>
<li>bottom-up, <code>make</code>-style build targets<ul>
<li>fast builds, skip redundant work when inputs haven&#39;t changed</li>
</ul>
</li>
<li>cli mode, or library mode</li>
<li>portability. build automation for <em>any</em> language or project, in many
environments (*limited to <em>Deno</em> target architectures, for the time being.
long term, we may package this in <code>Rust</code>)</li>
<li>great UX</li>
<li>debug-ability. üêõ inspect your data, tasks, or even <em>rad</em> itself</li>
<li>employs a real scripting language--<strong>not</strong> <code>bash/sh</code>! shell languages are
great for running other programs, not for plumbing data</li>
</ul>
<p>See
<a href="https://cdaringe.github.io/rad/#why-not-my-favorite-build-tool">why not <code>&lt;my-favorite-build-tool&gt;</code>?</a></p>
<p>Read more on our <a href="https://cdaringe.github.io/rad/">documentation site</a></p>

<h2 id="manual">Manual</h2>
<p>Your guide to <code>rad</code>!</p>
<h3 id="understanding-rad">Understanding rad</h3>
<ul>
<li><code>rad</code> is written in typescript and runs on <a href="https://deno.land/">deno</a></li>
<li>You write tasks, then ask <code>rad</code> to run them</li>
<li><code>rad</code> reads your radfile (i.e. <code>rad.ts</code>), compiles &amp; type checks it, then runs
it through its task graph executor</li>
</ul>
<p>ü§Ø</p>
<h3 id="getting-started">Getting started</h3>
<p>The first step to using rad is installation. Please see the <a href="#install">install</a>
section for guidance.</p>
<p>The CLI also has a decent help page. Once you have installed rad, try running
<code>rad --help</code>, to grow acquainted with some of the options you may expect to use
down the road.</p>
<p>Next up, creating a radfile!</p>
<h4 id="setting-up-radts">Setting up rad.ts</h4>
<p>To create a new radfile (<code>rad.ts</code>), run the following command:</p>
<p><code>$ rad -l info --init</code></p>
<p>rad.ts should have <em>two</em> key traits:</p>
<ul>
<li>an <code>import type { Task, Tasks } from &#39;https://path/to/rad/src/mod.ts</code>
statement</li>
<li>an <code>export const tasks: Tasks = {...}</code> statement</li>
</ul>
<p>Tasks are named in <code>rad.ts</code> strictly by their <em>key</em> in the <code>tasks</code> object.</p>
<pre><code class="language-ts">export const tasks: Tasks = {
  meet: /* omitted task */,
  greet: /* omitted task */
}
</code></pre>
<p>The above file has exactly two tasks--<code>meet</code> and <code>greet</code>! Simple!</p>
<p><code>rad</code> will look in the working directory for your radfile by default. If you so
choose, you may place <code>rad.ts</code> elsewhere, and tell rad where to find it using
the <code>-r/--radfile</code> flag. Next up, let&#39;s define those tasks.</p>
<h3 id="tasks">Tasks</h3>
<p>Tasks can take a couple of different forms. Generally, you can simply refer to
the <code>Task</code> type in your radfile and get cracking. Let&#39;s write a few tasks of
each type.</p>
<h4 id="command-tasks">Command tasks</h4>
<p>Command tasks are the simplest tasks. they are shell commands for rad to
execute:</p>
<pre><code class="language-ts">// rad.ts
import type { Task, Tasks } from &quot;url/to/rad/mod.ts&quot;;

const compile: Task = `clang file.c`;
const greet: Task = `echo &quot;hello, world!&quot;`;

export const tasks: Tasks = { compile, greet };
</code></pre>
<p>Command tasks are the only <code>&#39;string&#39;</code>ly defined tasks. The associated command
will get executed by <code>rad</code> in a child process, a la
<code>&lt;your-shell&gt; -c &#39;&lt;your-cmd&gt;&#39;</code>. For example, <code>rad greet</code> would be executed via
<code>bash -c &#39;echo &quot;hello, world!&quot;&#39;</code> under the hood if you are using the <code>bash</code>
shell.</p>
<blockquote>
<p>‚òùüèºCommand tasks should tend to be <em>fast</em>. If the executed command is not fast,
you may consider trying a function or make style task to speed things up, if
feasible.</p>
</blockquote>
<h4 id="function-tasks">Function tasks</h4>
<p>Function tasks are the most capable of all tasks. All other task types
internally get transformed into a function task. To use function tasks, create a
POJO with a <code>fn</code> key and function value. <code>fn</code> brings one
argument--<a href="#toolkit"><code>toolkit</code></a>--that offers a nice suite of batteries for your
convenience. ‚ö°Ô∏è</p>
<pre><code class="language-ts">// rad.ts
import type { Task, Tasks } from &quot;url/to/rad/mod.ts&quot;;

const build: Task = {
  fn: async (toolkit) =&gt; {
    const { logger, sh } = toolkit;
    await sh(`clang hello.c -o hello`);
    logger.info(`compile ok, asserting executable`);
    await sh(`./hello`); // stdout: Hello, world!
    logger.info(&quot;binary ok&quot;);
  },
};

export const tasks: Tasks = { build };
</code></pre>
<p>This is a pretty basic function task. When you get to the <a href="#toolkit"><code>toolkit</code></a>
section, you will see the other interesting utilities provided to do great
things with! You can of course also simply run rad, and introspect the toolkit
API if you are using a deno plugin in your code editor!</p>
<h4 id="make-tasks">Make tasks</h4>
<p>Make tasks are in honor of <a href="https://www.gnu.org/software/make/">gnu make</a>. Our
make task is intentionally not feature complete with the proper make task--but
it does have an essential core parity--providing an API to access <em>only files
that have changed</em> since the last task run. More specifically, it offers an API
to access only files that have been modified <em>since</em> the <code>target</code> has been last
modified. <code>target</code> is make-speak for an output file. Our make tasks also exposes
<em>all</em> files specified by your prerequisites as well. One <em>essential</em> difference
between our make task and proper-make tasks is that your <code>onMake</code> function will
<em>still run</em> even if no files have changed since the make <code>target</code> has
changed--it is up to you to <em>do nothing</em> in the task handler if no work is
warranted. How do you know if know work is warranted? You can consult the
<code>changedPrereqs</code> iterator or the <code>getChangedPrereqFilenames</code> function. Both
symbols signal to you changes that have occurred since the <code>target</code>&#39;s last
modification.</p>
<p>Let us take inspiration from a make task in our very own source project--the
build for this very website. Here is a simplified version:</p>
<pre><code class="language-ts">// rad.ts
import type { Task, Tasks } from &quot;url/to/rad/mod.ts&quot;;

const site: Task = {
  target: &quot;public/index.html&quot;,
  prereqs: [&quot;assets/site/**/*.{md}&quot;], // globs only
  onMake: async (
    /* toolkit api -- see #toolkit */
    { fs, logger },
    /* make task api */
    {
      getPrereqFilenames, // Promise&lt;string&gt;
      /**
       * prereqs, // AsyncIterable&lt;WalkInfo&gt;
       * changedPrereqs, // AsyncIterable&lt;WalkInfo&gt;
       * getChangedPrereqFilenames, // Promise&lt;string&gt;
       */
    },
  ) =&gt; {
    await fs.mkdirp(&quot;public&quot;);
    logger.info(&quot;collecting prereq filenames&quot;);
    const filenames = await getPrereqFilenames();
    const html = await Promise.all(
      filenames.map((filename) =&gt;
        Deno.readTextFile(filename).then((markdown) =&gt; marked(markdown))
      ),
    ).then((htmlSnippets) =&gt; htmlSnippets.join(&quot;\n&quot;));
    await Deno.writeTextFile(&quot;./public/index.html&quot;, html);
  },
};
</code></pre>
<p>If you have <strong>many</strong> prereqs, you should consider using the <code>AsyncIterator</code>
implementations referenced above so as to not eat all of your memory üòÄ.</p>
<p><code>gnu make</code> also has a
<a href="https://www.gnu.org/software/make/manual/html_node/Pattern-Rules.html">pattern syntax</a>
for when your task maps <em>N</em> prereqs to <em>M</em> targets. This is a pretty handy
feature. If you have <code>prereqs</code> and the targets can be considered functions of
the prereq files, make style tasks can <em>remove the <code>target</code> task key, and
instead use <code>mapPrereqToTarget</code></em>. Here is what that looks like in practice:</p>
<pre><code class="language-ts">export const tasks: Tasks = {
  clean: `rm -rf &#39;build&#39;`, // command style task
  build: {
    // make style task
    prereqs: [&quot;src/*&quot;],
    mapPrereqToTarget: ({ cwd, /* string */ prereq, /* string */ reroot }) =&gt;
      reroot(&quot;src&quot;, &quot;build&quot;, &quot;coffee&quot;, &quot;js&quot;),
    // maps src/tacos.coffee =&gt; build/tacos.js
    async onMake() {
      /* snip snip */
    },
  },
};
</code></pre>
<p>This is certainly <em>more verbose</em> than <code>make</code>&#39;s syntax. However, it has the
benefit of being a clear, debuggable function ü§ì! Further, this API does not
force you to have 1:1 mappings between inputs and outputs. If prereqs <code>a</code> and
<code>b</code> mapped to <code>foo</code> and <code>c</code> mapped to <code>bar</code>--no problem, you can express that
easily in <code>mapPrereqToTarget</code>!</p>
<p>Check out the type definitions for more on make tasks!</p>
<h3 id="task-dependencies">Task dependencies</h3>
<p>All task types, except command style tasks, accept an optional <code>dependsOn</code>
array. <code>dependsOn</code> is an array of task references. Task references must be
<strong>actual task references</strong>--string based task lookups are not supported,
intentionally. Stringy lookups are brittle, and would be redundant functionality
in <code>rad</code>.</p>
<blockquote>
<p><code>dependsOn</code> tasks can be serialized by setting the sibling field
<code>dependsOnSerial: true</code></p>
</blockquote>
<pre><code class="language-ts">// rad.ts
import type { Task, Tasks } from &quot;url/to/rad/mod.ts&quot;;

const install: Task = {
  target: &quot;node_modules&quot;,
  prereqs: [&quot;package.json&quot;],
  onMake: async ({ sh }, { getChangedPrereqFilenames }) =&gt; {
    const changed = await getChangedPrereqFilenames();
    if (changed.length) await sh(`npm ci --verbose`);
  },
};
const lint: Task = {
  dependsOn: [install],
  fn: ({ sh }) =&gt; sh(`npm run lint`),
};
const test: Task = {
  dependsOn: [install],
  fn: ({ sh }) =&gt; sh(`npm test`),
};

const ci: Task = {
  dependsOn: [lint, test],
};

export const tasks: Tasks = {
  ci,
  install,
  lint,
  test,
};
</code></pre>
<p>Sweet! I bet node.js users wish they could just clone a repo and run <code>rad test</code>,
then let the system &quot;know&quot; exactly what is needed to be test-ready! Similiarly,
as shown above, our <code>ci</code> task should depend on lint &amp; test tasks, of which both
will await an <code>install</code> to complete!</p>
<p>You can see what a task <code>dependsOn</code> by using <code>--print-graph</code>:</p>
<pre><code class="language-bash">$ rad ci --print-graph
‚îî‚îÄ ci
   ‚îú‚îÄ lint
   ‚îÇ  ‚îî‚îÄ install
   ‚îî‚îÄ test
      ‚îî‚îÄ install
</code></pre>
<p>Dude. Nice! We can have nice things!</p>
<h3 id="toolkit">Toolkit</h3>
<p>The <code>toolkit</code> is the first argument to <code>function</code> based tasks!</p>
<p>It has the following type!</p>
<pre><code class="language-ts">export type Toolkit = {
  Deno: typeof Deno;
  fs: fs.FsUtil;
  sh: typeof sh;
  dependentResults: any[];
  logger: Logger;
  path: typeof path;
  task: RadTask;
  iter: typeof iter;
};
</code></pre>
<p>Well that&#39;s not <em>super</em> helpful! Let us study each these keys, one-by-one:</p>
<table>
<thead>
<tr>
<th>key</th>
<th>value</th>
</tr>
</thead>
<tbody><tr>
<td><code>Deno</code></td>
<td>see the <a href="https://doc.deno.land/https/github.com/denoland/deno/releases/latest/download/lib.deno.d.ts">deno api docs</a></td>
</tr>
<tr>
<td><code>fs</code></td>
<td>a few sugar methods, <code>{ readFile, writeFile, mkdirp }</code> that work on strings, vs buffers, and assume utf8 for shorthand</td>
</tr>
<tr>
<td><code>sh</code></td>
<td>execute a shell command. see the command task section above!</td>
</tr>
<tr>
<td><code>dependentResults</code></td>
<td>results of <code>dependsOn</code> tasks. currently these are untyped. getting type inference here is tricky. PRs welcome!</td>
</tr>
<tr>
<td><code>logger</code></td>
<td>the <code>rad</code> logger! a standard <code>Deno</code> logger with the commonplace log-level methods (e.g. <code>.info(...)</code>, <code>.debug(...)</code>, etc). see <a href="https://github.com/cdaringe/rad/blob/v6.3.5/src/logger.ts">the source</a></td>
</tr>
<tr>
<td><code>path</code></td>
<td>a direct reference to <a href="https://deno.land/std/node/path.ts">deno node path</a>. this API is likely to change if Deno implements a full, proper path module</td>
</tr>
<tr>
<td><code>task</code></td>
<td>a reference to the internal <code>RadTask</code></td>
</tr>
<tr>
<td><code>iter</code></td>
<td><code>AsyncIterable</code> utility functions</td>
</tr>
</tbody></table>

<h1 id="why-not-my-favorite-build-tool">why not <code>&lt;my-favorite-build-tool&gt;</code>?</h1>
<p>your build tool is probably great. keep using it if you love it. the intent here
it not to dump on anyone or any tool, but articulate feature gaps.</p>
<table>
<thead>
<tr>
<th>tool</th>
<th>DSL-less</th>
<th>static types</th>
<th>standalone</th>
<th>polyglot</th>
<th>incremental</th>
<th>debug-able</th>
<th>beautiful</th>
<th>dependency manager</th>
</tr>
</thead>
<tbody><tr>
<td>bazel</td>
<td></td>
<td></td>
<td></td>
<td>‚úì</td>
<td>‚úì</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>denox</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>gradle</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>‚úì</td>
<td></td>
<td>‚úì</td>
<td>‚úì</td>
</tr>
<tr>
<td>gulp/grunt</td>
<td>‚úì</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>‚úì</td>
<td>‚úì</td>
<td></td>
</tr>
<tr>
<td>make</td>
<td></td>
<td></td>
<td>‚úì</td>
<td>‚úì</td>
<td>‚úì</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>npm-scripts</td>
<td>‚úì</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>‚úì</td>
</tr>
<tr>
<td><strong>rad</strong></td>
<td>‚úì</td>
<td>‚úì</td>
<td></td>
<td>‚úì</td>
<td>‚úì</td>
<td>(soon!)</td>
<td>‚úì</td>
<td></td>
</tr>
<tr>
<td>velociraptor</td>
<td></td>
<td>partial</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>partial</td>
</tr>
</tbody></table>
<p>ant, scons, ninja, etc were omitted. haven&#39;t used &#39;em! other builders, such as
cargo, dune, nx, and friends were omitted, as they are not generally considered
general purpose. npm-scripts &amp; the Deno tools are not general purpose either,
but included merely by proximity of underlying tech stacks used.</p>
<p>Here are some genuine, not-trying-be-rude-opinions.</p>
<ul>
<li><code>bazel</code> is complex. maybe you need that complexity. ü§∑üèª‚Äç‚ôÄÔ∏è</li>
<li><code>gradle</code> is full of magic and is often hard to reason about <em>where</em> behavior
comes from. Once kotlin integration is first class, it&#39;s worth revisiting
gradle.</li>
<li><code>gulp</code>/<code>grunt</code> have no make-style tasks, are generally node only,
comparatively slow, &amp; stringly typed in various places.</li>
<li><code>make</code> is great, but has a lame DSL and is coupled to a poor scripting
language</li>
<li><code>npm-scripts</code>/<code>velociraptor</code> are simple, but suffer related drawbacks to gulp,
grunt, and make.</li>
</ul>
<p>Loose typing, unneeded DSLs, lack of great static analysis, and <em>other</em> gaps
leave room for improvement in this space. <code>rad</code> is the first tool to bring a
subjectively <em>powerful</em> scripting language into the build system space coupled
with great static analysis and make-capable performance.</p>

</div>
<script>const chaos = ({ w , h , count ,  })=>{
    const xforms = [];
    const getTranslateProposal = ()=>[
            Math.random() * w * 0.85,
            h * Math.random()
        ]
    ;
    const distance = ([a, b], [x, y])=>Math.sqrt(Math.pow(a - x, 2) + Math.pow(b - y, 2))
    ;
    const scootchAway = ([a, b], [stepX, stepY] = [
        10,
        30
    ])=>[
            a + (Math.random() + stepX) * (Math.random() > 0.5 ? 1 : -1),
            b + (1 + Math.random() + stepY) * (Math.random() > 0.5 ? 1 : -1), 
        ]
    ;
    let i = count;
    while(i){
        let translate = getTranslateProposal();
        while(distance(translate, [
            700,
            280
        ]) < 190){
            translate = scootchAway(translate);
        }
        xforms.push({
            translate,
            rotate: [
                360 * Math.random()
            ],
            scale: 0.5
        });
        --i;
    }
    return xforms;
};
const order = ({ w , h , count ,  })=>{
    const times = (count1)=>"_".repeat(count1).split("")
    ;
    const xforms = [];
    const numRows = 3;
    const numCols = 17;
    const ySep = h / (3 + 1);
    const xSep = w / (17 + 1);
    times(3).forEach((_, iy)=>{
        times(17).forEach((_1, ix)=>{
            xforms.push({
                translate: [
                    ix * xSep,
                    iy * ySep - 35
                ],
                rotate: [
                    70
                ],
                scale: 0.5
            });
        });
    });
    return xforms;
};
function paintBabies(transform) {
    let count = 51;
    const [w, h] = [
        800,
        300
    ];
    var group = document.getElementById("repeats");
    var nodes = Array.from(group.children);
    const getTransformString = ({ translate , rotate , scale  })=>`translate(${translate.join(" ")}) rotate(${rotate.join(" ")}) scale(${scale})`
    ;
    const xforms = transform({
        count,
        w,
        h
    });
    if (group.innerHTML) {
        xforms.forEach((xform, i)=>{
            nodes[i].setAttribute("transform", getTransformString(xform));
        });
    } else {
        group.innerHTML = xforms.map((xform, i)=>`\n    <use id='baby_${i}' class='text baby-rad' xlink:href="#repeatme"\n      transform="${getTransformString(xform)}"\n    />\n  `
        ).join("");
    }
}
let transforms = [
    chaos,
    order
];
paintBabies(chaos);
const chaosTimer = setTimeout(()=>window.requestAnimationFrame(()=>paintBabies(order)
    )
, 500);
function whileNotInstallingTransforms(cb) {
    let isExecuting = false;
    return async ()=>{
        if (isExecuting) return;
        isExecuting = true;
        try {
            if (transforms.length === 2) {
                const tUrl = window.location.port == "3333" ? "http://localhost:3333/transforms.js" : window.location.href.match(/github/) ? `https://cdaringe.github.io/rad/transforms.js` : `${window.location.origin}/transforms.js`;
                transforms = await import(tUrl).then((r)=>transforms.concat(r.transforms)
                );
            }
        } finally{
            isExecuting = false;
            await Promise.resolve(cb());
        }
    };
}
let transformIndex = 1;
const onClick = window.onclick = whileNotInstallingTransforms(()=>{
    clearTimeout(chaosTimer);
    ++transformIndex;
    if (!transforms[transformIndex]) {
        transformIndex = 0;
        document.getElementById("add_more_transforms").style.display = "";
    }
    paintBabies(transforms[transformIndex]);
});
document.getElementById("radness").addEventListener("click", onClick);
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
